ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY '01695402297';
flush privileges;

CREATE DATABASE SHOPBAN_QUANAO;

USE SHOPBAN_QUANAO;

CREATE TABLE THUONGHIEU (
	MA_THUONGHIEU INT AUTO_INCREMENT NOT NULL,
	TEN_THUONGHIEU VARCHAR(50) NOT NULL,
	PRIMARY KEY (MA_THUONGHIEU)
);

INSERT INTO THUONGHIEU (TEN_THUONGHIEU)
VALUES ('No brand'),
	   ('Abercrombie & Fitch'),
       ('Adidas'),
       ('Aeropostale'),
       ('Aj Morgan'),
       ('Aldo'),
       ('ƒêAN CH√ÇU');
       
CREATE TABLE CHATLIEU (
	MA_CHATLIEU INT AUTO_INCREMENT NOT NULL,
    TEN_CHATLIEU VARCHAR(50) NOT NULL,
    PRIMARY KEY (MA_CHATLIEU)
);

INSERT INTO CHATLIEU (TEN_CHATLIEU)
VALUES ('D√¢y'),
	   ('L√¥ng c·ª´u'),
       ('Len ƒëan'),
       ('Len acrylic'),
       ('Cashmere'),
       ('Cotton');
       
CREATE TABLE LOAI_SP0 (
	MA_LOAI0 INT AUTO_INCREMENT NOT NULL,
    TEN_LOAI0 VARCHAR(50) NOT NULL,
    PRIMARY KEY (MA_LOAI0)
);

INSERT INTO LOAI_SP0 (TEN_LOAI0)
VALUES ('Qu·∫ßn √°o nam'),
	   ('Qu·∫ßn √°o n·ªØ');
       
CREATE TABLE LOAI_SP1 (
	MA_LOAI1 INT AUTO_INCREMENT NOT NULL,
    TEN_LOAI1 VARCHAR(50) NOT NULL,
    MA_LOAI0 INT NOT NULL,
    PRIMARY KEY (MA_LOAI1),
    FOREIGN KEY (MA_LOAI0) REFERENCES LOAI_SP0(MA_LOAI0)
);

INSERT INTO LOAI_SP1 (TEN_LOAI1, MA_LOAI0)
VALUES ('√Åo thun', 1),
	   ('√Åo s∆° mi', 1),
       ('√Åo', 2),
	   ('Ch√¢n v√°y', 2);

CREATE TABLE LOAI_SP2 (
	MA_LOAI2 INT AUTO_INCREMENT NOT NULL,
    TEN_LOAI2 VARCHAR(50) NOT NULL,
	MA_LOAI1 INT NOT NULL,
    PRIMARY KEY (MA_LOAI2),
    FOREIGN KEY (MA_LOAI1) REFERENCES LOAI_SP1(MA_LOAI1)
);

INSERT INTO LOAI_SP2 (TEN_LOAI2, MA_LOAI1)
VALUES ('√Åo len', 1),
	   ('√Åo ng·∫Øn tay c√≥ c·ªï', 1),
       ('D√†i tay', 2),
	   ('Ng·∫Øn tay', 2),
       ('√Åo Croptop', 3),
	   ('√Åo s∆° mi', 3),
       ('Ch√¢n v√°y xo√®', 4),
	   ('Ch√¢n v√°y ng·∫Øn', 4);
       
CREATE TABLE SANPHAM (
	MA_SANPHAM INT NOT NULL,
    TEN_SANPHAM VARCHAR(250) NOT NULL,
    MA_LOAI2 INT NOT NULL,
    MA_THUONGHIEU INT NOT NULL,
    MA_CHATLIEU INT NOT NULL,
    -- KHOILUONG INT DEFAULT 0,
    MOTA TEXT NULL,
    GIABAN INT NOT NULL DEFAULT 0,
    KHUYENMAI TINYINT DEFAULT 0,
	HINHANH VARCHAR(1000) NOT NULL,
    SOLUONGTON INT DEFAULT 0,
    PRIMARY KEY (MA_SANPHAM),
    FOREIGN KEY (MA_LOAI2) REFERENCES LOAI_SP2 (MA_LOAI2),
    FOREIGN KEY (MA_THUONGHIEU) REFERENCES THUONGHIEU (MA_THUONGHIEU),
    FOREIGN KEY (MA_CHATLIEU) REFERENCES CHATLIEU (MA_CHATLIEU)
);


INSERT INTO SANPHAM (MA_SANPHAM, TEN_SANPHAM, MA_LOAI2, MA_THUONGHIEU, MA_CHATLIEU, MOTA, GIABAN, KHUYENMAI, HINHANH, SOLUONGTON)
VALUES (1, 'S∆† MI TR·∫ÆNG TAY D√ÄI', 3, 1, 6, 'üåàüåàüåàS∆† MI NAM WHITE & BLACK
‚õîÔ∏è √ÅO B√äN √ù ƒê·∫∂T MAY NH√â!!! ch·∫•t l∆∞·ª£ng ƒë·∫πp t·ª´ng c√°i - BAO ƒê·ªîI N·∫æU H√ÄNG K√âM CH·∫§T L∆Ø·ª¢NG.
‚ö°Ô∏è‚ö°Ô∏è‚ö°Ô∏è Gi√° l·∫ª: 170k
‚ö°Ô∏è‚ö°Ô∏è‚ö°Ô∏è Gi√° s·ªâ 5sp: 145k 
‚ù£Ô∏è Shopee: shopee.vn/menshopgiare
‚ù£Ô∏è Size: M - L XL - XXL
üìûüìû CALL/ ZALO: 0987.96.4243', 200000, 46, 'HINHANH', 200);

CREATE TABLE KHACHHANG (
	MA_KHACHHANG INT NOT NULL,
    TAIKHOAN VARCHAR(50) NOT NULL,
    MATKHAU VARCHAR(50) NOT NULL,
    TEN_KHACHHANG VARCHAR(100) NULL,
    DIENTHOAI VARCHAR(20) NULL,
    `TINH/THANHPHO` VARCHAR(100) NULL,
    `QUAN/HUYEN` VARCHAR(100) NULL,
    `PHUONG/XA` VARCHAR(100) NULL,
    `SONHA/DUONG` VARCHAR(100) NULL,
    AVATAR VARCHAR(100) NULL,
    PRIMARY KEY (MA_KHACHHANG)
);

INSERT INTO KHACHHANG (MA_KHACHHANG, TAIKHOAN, MATKHAU, TEN_KHACHHANG, DIENTHOAI, `TINH/THANHPHO`, `QUAN/HUYEN`, `PHUONG/XA`, `SONHA/DUONG`, AVATAR)
VALUES (1, 'caubinhphu', '1234', NULL, NULL, NULL, NULL, NULL, NULL, NULL);

CREATE TABLE TRANGTHAI_DONHANG (
	MA_TRANGTHAI INT AUTO_INCREMENT NOT NULL,
    TEN_TRANGTHAI VARCHAR(50) NOT NULL,
    PRIMARY KEY (MA_TRANGTHAI)
);

INSERT INTO TRANGTHAI_DONHANG(TEN_TRANGTHAI)
VALUES ('Ch·ªù x√°c nh·∫≠n'),
	   ('Ch·ªù l·∫•y h√†ng'),
       ('ƒêang giao'),
       ('ƒê√£ giao'),
       ('ƒê√£ hu·ª∑'),
       ('Tr·∫£ h√†ng/Ho√†n ti·ªÅn');

CREATE TABLE GIOHANG (
	MA_KHACHHANG INT NOT NULL,
    MA_SANPHAM INT NOT NULL,
	SOLUONG INT DEFAULT 1,
    PRIMARY KEY (MA_KHACHHANG, MA_SANPHAM),
    FOREIGN KEY (MA_KHACHHANG) REFERENCES KHACHHANG (MA_KHACHHANG),
    FOREIGN KEY (MA_SANPHAM) REFERENCES SANPHAM (MA_SANPHAM)
);

INSERT INTO GIOHANG (MA_KHACHHANG, MA_SANPHAM)
VALUES (1, 1);

CREATE TABLE DONDATHANG (
	MA_DONDATHANG INT NOT NULL,
    MA_KHACHHANG INT NOT NULL,
    NGAY_DATHANG DATE,
    MA_TRANGTHAI INT NOT NULL,
    TEN_NGUOINHAN VARCHAR(100) NOT NULL,
    DIENTHOAI_NGUOINHAN VARCHAR(20) NOT NULL,
	`TINH/THANHPHO` VARCHAR(100) NOT NULL,
    `QUAN/HUYEN` VARCHAR(100) NOT NULL,
    `PHUONG/XA` VARCHAR(100) NOT NULL,
    `SONHA/DUONG` VARCHAR(100) NOT NULL,
    PHI_VANCHUYEN INT DEFAULT 0,
    NGAY_XUATHANG DATE,
    NGAY_GIAOHANG DATE,
    PRIMARY KEY (MA_DONDATHANG),
    FOREIGN KEY (MA_KHACHHANG) REFERENCES KHACHHANG (MA_KHACHHANG),
    FOREIGN KEY (MA_TRANGTHAI) REFERENCES TRANGTHAI_DONHANG (MA_TRANGTHAI)
);

CREATE TABLE CT_DONDATHANG (
	MA_DONDATHANG INT NOT NULL,
    MA_SANPHAM INT NOT NULL,
    SOLUONG INT DEFAULT 1,
    GIAGOC INT DEFAULT 0,
    KHUYENMAI INT DEFAULT 0,
    PRIMARY KEY (MA_DONDATHANG, MA_SANPHAM),
    FOREIGN KEY (MA_DONDATHANG) REFERENCES DONDATHANG (MA_DONDATHANG),
    FOREIGN KEY (MA_SANPHAM) REFERENCES SANPHAM (MA_SANPHAM)
);

select * from khachhang;

DELIMITER $$
create procedure sp_test()
begin
	select * from khachhang;
    select * from thuonghieu;
end $$
DELIMITER ;

call sp_test();

select * from khachhang;

create table test (
	id int auto_increment primary key,
    col1 varchar(10) not null, 
    col2 int not null
);
insert into test (col1, col2) values ('m·ªôt', 1), ('hai', 2);

select * from test;
